---
title: MLflow Tracking Server Security
description: Learn how to secure your MLflow tracking server against common web vulnerabilities
---

# MLflow Tracking Server Security

:::important Version Requirement
The security middleware features described in this guide are available in **MLflow 3.5.0 and above only**.
If you're using an earlier version, you'll need to implement your own security measures via reverse proxy or upgrade to MLflow 3.5.0+.
:::

Starting from version 3.5.0, MLflow includes built-in security middleware that protects your tracking server against common web vulnerabilities. This guide explains the security features, how to configure them, and best practices for deployment.

## Why Security Middleware?

MLflow tracking servers are often exposed to networks beyond localhost, making them potential targets for various attacks. The security middleware provides protection against:

- **DNS Rebinding Attacks**: Prevents attackers from tricking browsers into accessing internal services
- **Cross-Origin Resource Sharing (CORS) Attacks**: Blocks unauthorized cross-origin requests that could steal data
- **Host Header Injection**: Prevents attacks that manipulate the Host header for cache poisoning or password reset attacks
- **Clickjacking**: Prevents embedding MLflow UI in malicious iframes
- **MIME Type Confusion**: Blocks browsers from incorrectly interpreting file types

## Default Security Behavior

By default, MLflow server is configured for **secure local and internal network development**:

- Accepts connections from localhost addresses (127.0.0.1, ::1, localhost) and private IP ranges (192.168._, 10._, 172.16-172.31.\*)
- Blocks cross-origin requests except from common localhost ports (3000, 5000, 8000, 8080)
- Validates Host headers to prevent DNS rebinding attacks
- Adds security headers to all responses (X-Frame-Options, X-Content-Type-Options)

This means you can run `mlflow server` on your local machine or internal network without any configuration, and team members can access it from private IP addresses.

## Configuration Options

Security is configured via environment variables:

### Core Security Variables

| Variable                        | Description                                  | Default                                  | Example                                                   |
| ------------------------------- | -------------------------------------------- | ---------------------------------------- | --------------------------------------------------------- |
| `MLFLOW_CORS_ALLOWED_ORIGINS`   | Comma-separated list of allowed CORS origins | localhost ports (3000, 5000, 8000, 8080) | `"https://app.company.com,https://dashboard.company.com"` |
| `MLFLOW_ALLOWED_HOSTS`          | Comma-separated list of allowed Host headers | localhost + private IP ranges            | `"mlflow.company.com,mlflow.internal:5000"`               |
| `MLFLOW_HOST_HEADER_VALIDATION` | Enable Host header validation                | `"true"`                                 | `"false"` (not recommended)                               |
| `MLFLOW_ALLOW_INSECURE_CORS`    | Allow ALL origins (DANGEROUS!)               | `"false"`                                | `"true"` (dev only!)                                      |

## Common Deployment Scenarios

### 1. Local Development (Default)

No configuration needed - just run:

```bash
mlflow server
```

The server will:

- Accept connections only from localhost
- Allow CORS from localhost origins (ports 3000, 5000, etc.)
- Be protected against external attacks

### 2. Team Development Server

For a shared development server on your internal network:

```bash
# Allow team members to access from their browsers
export MLFLOW_CORS_ALLOWED_ORIGINS="http://dev-server:5000,http://192.168.1.100:5000"
export MLFLOW_ALLOWED_HOSTS="dev-server:5000,192.168.1.100:5000"

mlflow server --host 0.0.0.0
```

### 3. Production with Specific Applications

For production with known client applications:

```bash
# Only allow your specific applications
export MLFLOW_CORS_ALLOWED_ORIGINS="https://ml-dashboard.company.com,https://notebook.company.com"
export MLFLOW_ALLOWED_HOSTS="mlflow.company.com"

# Run behind a reverse proxy that handles HTTPS
mlflow server --host 127.0.0.1 --port 5000
```

### 4. Behind a Reverse Proxy (nginx/Apache)

If your reverse proxy handles security:

```bash
# Disable MLflow's security (proxy handles it)
export MLFLOW_HOST_HEADER_VALIDATION="false"
export MLFLOW_ALLOW_INSECURE_CORS="true"

# Only bind to localhost since proxy handles external connections
mlflow server --host 127.0.0.1
```

Example nginx configuration:

```nginx
server {
    listen 443 ssl;
    server_name mlflow.company.com;

    # Security headers
    add_header X-Frame-Options "SAMEORIGIN";
    add_header X-Content-Type-Options "nosniff";

    # CORS configuration
    add_header Access-Control-Allow-Origin "https://app.company.com";

    location / {
        proxy_pass http://127.0.0.1:5000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

### 5. Development with Insecure CORS (⚠️ WARNING)

**NEVER use this in production!** Only for local development:

```bash
# Allows ALL origins - extremely dangerous!
export MLFLOW_ALLOW_INSECURE_CORS="true"

mlflow server --host 0.0.0.0
```

## Troubleshooting Access Issues

### "403 Invalid Host header" Error

**Symptom**: Clients receive a 403 error with "Invalid Host header - possible DNS rebinding attack detected"

**Solution**: Add the hostname to allowed hosts:

```bash
export MLFLOW_ALLOWED_HOSTS="mlflow.company.com,10.0.0.5:5000"
```

### "403 Cross-origin request blocked" Error

**Symptom**: Web applications can't access the API, receiving "Cross-origin request blocked"

**Solution**: Add the application's origin:

```bash
export MLFLOW_CORS_ALLOWED_ORIGINS="https://notebook.company.com,https://app.company.com"
```

### Preflight OPTIONS Requests Failing

**Symptom**: Browser's preflight requests fail for CORS

**Solution**: Ensure the origin is in allowed origins and the server accepts OPTIONS requests:

```bash
export MLFLOW_CORS_ALLOWED_ORIGINS="https://yourapp.com"
```

### Local Network Access Issues

**Symptom**: Can't access from other machines on local network

**Solution**: The server automatically allows private IP addresses. Ensure you're binding to all interfaces:

```bash
mlflow server --host 0.0.0.0
```

## Security Best Practices

### 1. Always Use HTTPS in Production

MLflow server doesn't handle HTTPS directly. Use a reverse proxy:

- nginx, Apache, or Caddy for HTTPS termination
- Cloud load balancers (AWS ALB, GCP Load Balancer)
- Kubernetes ingress controllers

### 2. Explicitly Configure Allowed Origins

Don't rely on defaults in production:

```bash
# Good - explicit configuration
export MLFLOW_CORS_ALLOWED_ORIGINS="https://app1.company.com,https://app2.company.com"

# Bad - using insecure mode
export MLFLOW_ALLOW_INSECURE_CORS="true"  # Never in production!
```

### 3. Use Specific Hostnames

Be specific about allowed hosts:

```bash
# Good - specific hosts
export MLFLOW_ALLOWED_HOSTS="mlflow.company.com,mlflow.internal.company.com:5000"

# Bad - disabling validation
export MLFLOW_HOST_HEADER_VALIDATION="false"  # Avoid unless necessary
```

### 4. Regular Security Updates

Keep MLflow updated to get the latest security patches:

```bash
# Ensure you have at least version 3.5.0 for security middleware
pip install --upgrade "mlflow>=3.5.0"
```

### 5. Monitor Access Logs

Enable debug logging to monitor security blocks:

```bash
mlflow server --host 0.0.0.0 --dev  # Enables debug logging
```

### 6. Principle of Least Privilege

Only allow the minimum necessary access:

- Restrict CORS origins to known applications
- Limit allowed hosts to your domain
- Use authentication (MLflow auth or reverse proxy auth)

## Migration Guide

### Upgrading to MLflow 3.5.0+

If you're upgrading from an older version (pre-3.5.0):

1. **Local Development**: No changes needed - security is transparent for localhost

2. **Production Servers**: You may need to configure allowed origins:

   ```bash
   # If you have web apps accessing MLflow:
   export MLFLOW_CORS_ALLOWED_ORIGINS="https://yourapp.com"

   # If accessed via custom domain:
   export MLFLOW_ALLOWED_HOSTS="mlflow.yourdomain.com"
   ```

3. **Behind Reverse Proxy**: If your proxy handles security, disable MLflow's:
   ```bash
   export MLFLOW_HOST_HEADER_VALIDATION="false"
   export MLFLOW_ALLOW_INSECURE_CORS="true"
   ```

### Testing Your Configuration

Test your security configuration:

1. **Test Host validation**:

   ```bash
   # Should fail with 403
   curl -H "Host: evil.com" http://your-mlflow-server:5000/api/2.0/mlflow/experiments/search
   ```

2. **Test CORS protection**:

   ```bash
   # Should fail with 403 if origin not allowed
   curl -X POST -H "Origin: http://evil.com" \
        http://your-mlflow-server:5000/api/2.0/mlflow/experiments/create
   ```

3. **Test from allowed origin**:
   ```bash
   # Should succeed
   curl -H "Origin: https://yourapp.com" \
        http://your-mlflow-server:5000/api/2.0/mlflow/experiments/search
   ```

## Disabling Security (Not Recommended)

If you have your own security layer and need to disable MLflow's:

```bash
# Disable all security checks
export MLFLOW_HOST_HEADER_VALIDATION="false"
export MLFLOW_ALLOW_INSECURE_CORS="true"

# Only bind to localhost if behind proxy
mlflow server --host 127.0.0.1
```

⚠️ **Warning**: Only disable security if you have alternative protections in place!

## Implementation Details

MLflow uses industry-standard middleware libraries for security:

- **Flask Backend**:
  - [Flask-CORS](https://flask-cors.readthedocs.io/) for CORS protection
  - Custom host validation using fnmatch for wildcard pattern matching
  - Automatic allowlisting of private IP ranges (192.168._, 10._, 172.16-31.\*)

- **FastAPI Backend**:
  - Native [Starlette middleware](https://www.starlette.io/middleware/):
    - `TrustedHostMiddleware` for DNS rebinding protection
    - `CORSMiddleware` for cross-origin protection
  - Custom lightweight middleware for security headers only
  - Supports Starlette's `:*` wildcard format for port matching

This approach leverages well-tested, battle-hardened libraries rather than reinventing security mechanisms. Both backends provide consistent security features while using framework-appropriate implementations.

## Security Headers Added

MLflow automatically adds these security headers to all responses:

| Header                             | Value        | Purpose                     |
| ---------------------------------- | ------------ | --------------------------- |
| `X-Content-Type-Options`           | `nosniff`    | Prevents MIME type sniffing |
| `X-Frame-Options`                  | `SAMEORIGIN` | Prevents clickjacking       |
| `Access-Control-Allow-Origin`      | (varies)     | Controls CORS access        |
| `Access-Control-Allow-Credentials` | `true`       | Allows credentials in CORS  |
| `Vary`                             | `Origin`     | Prevents cache poisoning    |

## Additional Resources

- [DNS Rebinding Attack Explained](https://en.wikipedia.org/wiki/DNS_rebinding)
- [MDN on CORS](https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS)
- [Web Security: Same-Origin Policy](https://developer.mozilla.org/en-US/docs/Web/Security/Same-origin_policy)
- [OWASP Top 10 Security Risks](https://owasp.org/www-project-top-ten/)

## Getting Help

If you encounter issues:

1. Check the [Troubleshooting](#troubleshooting-access-issues) section
2. Enable debug logging: `mlflow server --dev`
3. File an issue on [GitHub](https://github.com/mlflow/mlflow/issues)
4. Join the [MLflow Slack](https://mlflow.org/slack) community
